---
title: "Pacman Multiagent"
---

Tato část dokumentuje řešení sady úloh zaměřených na inteligentní agenty v prostředí Pacmana. Cílem bylo implementovat a otestovat algoritmy prohledávání stavového prostoru v reálném čase.

::: {.callout-note}
Všechny implementace splňují požadavky autograderu na **100 %** (plný počet bodů).
:::

## Reflex Agent
Prvním krokem byl návrh reflexivního agenta, který se rozhoduje pouze na základě aktuálního stavu, bez prohledávání do hloubky.

### Klíčové principy
- **Jídlo**: Agent je motivován převrácenou vzdáleností k nejbližšímu jídlu (čím blíže, tím lépe).
- **Duchové**: Pokud je duch příliš blízko (vzdálenost < 2) a není ve stavu "scared", agent dostává extrémní penalizaci.
- **Scared Ghosts**: Pokud je duch zranitelný, agent je motivován k jeho snědení (ale s menší prioritou než přežití).

## Minimax
Implementace algoritmu Minimax umožňuje agentovi předvídat tahy soupeřů (duchů) za předpokladu, že hrají optimálně (snaží se minimalizovat Pacmanovo skóre).

### Implementace
Algoritmus je implementován rekurzivně. Pacman (MAX) maximalizuje hodnotící funkci, zatímco duchové (MIN) ji minimalizují.

```python
# Ukázka logiky rozhodování (pseudokód)
def get_action(state, depth, agent_index):
    if terminal(state) or depth == 0:
        return evaluate(state)
        
    if agent_index == PACMAN:
        return max(get_action(next_state, depth, next_agent) for next_state in successors) # <1>
    else:
        return min(get_action(next_state, depth, next_agent) for next_state in successors) # <2>
```
1. Pacman hledá tah s nejvyšším ohodnocením.
2. Duchové hledají tah, který Pacmanovi nejvíce uškodí.

## Alpha-Beta Pruning
Pro zefektivnění prohledávání byla implementována metoda Alpha-Beta prořezávání. Ta umožňuje ignorovat větve stromu, které nemohou ovlivnit finální rozhodnutí.

- **Alpha**: Nejlepší hodnota, kterou může MAX (Pacman) zaručit.
- **Beta**: Nejlepší hodnota, kterou může MIN (Duch) zaručit.

Pokud v uzlu MIN nalezneme hodnotu menší než Alpha, víme, že MAX do tohoto uzlu nikdy nevstoupí, a můžeme prohledávání ukončit (pruning).

::: {.callout-tip}
Tato optimalizace umožnila prohledávat do větší hloubky ve stejném čase, což vedlo k výrazně silnější hře agenta.
:::

:::

## Expectimax
Zatímco Minimax předpokládá optimálně hrajícího soupeře, **Expectimax** modeluje duchy jako agenty, kteří se rozhodují částečně náhodně (suboptimálně).

- **Pacman (MAX)**: Stále maximalizuje své skóre.
- **Duchové (CHANCE)**: Místo minimalizace počítáme **očekávanou hodnotu** (vážený průměr) všech možných tahů.
- **Předpoklad**: Duchové vybírají tahy z uniformní distribuce (náhodně).

$$ V(s) = \sum_{a \in Actions(s)} P(a) \times V(Successor(s, a)) $$

```python
# Ukázka logiky rozhodování (pseudokód)
if agent_index == PACMAN:
    return max(get_action(next_state, depth, next_agent) for next_state in successors)
else:
    # Duchové hrají náhodně (průměrná hodnota)
    return sum(get_action(next_state, depth, next_agent) for next_state in successors) / len(successors)
```

### Výhody přístupu
Tento přístup je v prostředí Pacmana často efektivnější než Minimax, protože duchové nehraji vždy perfektně. Expectimax se nesnaží "přežít za každou cenu" proti nejhoršímu scénáři (který nenastane), ale maximalizuje průměrný zisk. To vede k odvážnějšímu chování, kdy Pacman "riskuje" pro získání jídla, pokud je pravděpodobnost chycení nízká.

## Závěr "Warm-up" části
Tato sada úloh posloužila jako ověření základních principů adversariálního prohledávání. Získané znalosti (zejména o Alpha-Beta prořezávání a návrhu heuristik) byly následně aplikovány a výrazně rozšířeny v hlavní části práce - **Analýze Anglické dámy**.
